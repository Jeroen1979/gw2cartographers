// Generated by CoffeeScript 1.3.1
(function() {

  window.Cartographer = {};

  Cartographer.router = Backbone.Router.extend({
    routes: {},
    initialize: function() {
      var routes,
        _this = this;
      routes = [[/^(en|fr)*\/*$/, 'handleLang', this.handleLang], [/^(en|fr)*\/lat\/([0-9.]+)\/lgn\/([0-9.]+)\/*$/, 'handleCoord', this.handleLangWithParams]];
      _.each(routes, function(route) {
        return _this.route.apply(_this, route);
      });
      return Backbone.history.start();
    },
    handleLang: function(lang) {
      if ((lang != null) && (lang === "fr" || lang === "en")) {
        return Cartographer.switchLang(lang);
      } else {
        return this.navigate("fr", {
          trigger: true
        });
      }
    },
    handleCoord: function(lang, lat, lgn) {
      this.handleLang(lang);
      return Cartographer.highlighMarker({
        lat: lat,
        lgn: lgn
      });
    }
  });

  Cartographer.initiate = function() {
    return this.cartographerRouter = new Cartographer.router();
  };

  Cartographer.switchLang = function(lang) {
    return console.log("switching lang to " + lang);
  };

  Cartographer.highlighMarker = function(coord) {
    return console.log("highlighting marker at " + coord.lat + ", " + coord.lgn);
  };

  $(function() {
    return Cartographer.initiate();
  });

}).call(this);
