// Generated by CoffeeScript 1.3.3
(function() {

  window.LANG = "en";

  Cartographer.initiate = function() {
    this.router = new Cartographer.router();
    return console.log("loading map");
  };

  Cartographer.switchLang = function(lang) {
    if (window.LANG !== lang) {
      console.log("switching lang to " + lang);
      return window.LANG = lang;
    }
  };

  Cartographer.highlighMarker = function(coord) {
    return console.log("highlighting marker at " + coord.lat + ", " + coord.lgn);
  };

  Cartographer.router = Backbone.Router.extend({
    routes: {},
    initialize: function() {
      var routes,
        _this = this;
      routes = [[/^(en|fr)*\/*$/, 'handleLang', this.handleLang], [/^(en|fr)*\/lat\/([0-9.]+)\/lgn\/([0-9.]+)\/*$/, 'handleCoord', this.handleLangWithParams]];
      _.each(routes, function(route) {
        return _this.route.apply(_this, route);
      });
      return Backbone.history.start();
    },
    handleLang: function(lang) {
      return Cartographer.switchLang(lang);
    },
    handleCoord: function(lang, lat, lgn) {
      this.handleLang(lang);
      return Cartographer.highlighMarker({
        lat: lat,
        lgn: lgn
      });
    }
  });

  $(function() {
    return Cartographer.initiate();
  });

}).call(this);
